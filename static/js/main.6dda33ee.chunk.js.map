{"version":3,"sources":["components/Searchbar/Searchbar.jsx","service/Api.jsx","utils/scroll.jsx","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGalleryList/ImageGalleryList.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","components/Notices/Notices.jsx","components/ImageGallery/ImageGallery.jsx","App.js","index.js"],"names":["SearchBar","onSubmit","useState","searchQuery","setSearchQuery","className","e","preventDefault","trim","toast","error","type","autoComplete","autoFocus","placeholder","onChange","currentTarget","value","toLowerCase","API_KEY","BASE_URL","fetchData","page","perPage","url","fetch","then","response","ok","json","Promise","reject","Error","state","images","hits","scrollContent","window","scrollTo","top","document","documentElement","scrollHeight","behavior","ImageGalleryItem","webformatURL","largeImageURL","tags","onImageClick","onClick","src","alt","ImageGalleryList","map","image","id","Button","name","propTypes","PropTypes","arrayOf","shape","number","isRequired","string","func","propType","modalRoot","querySelector","Modal","props","useEffect","handleKeyDown","code","onClose","addEventListener","removeEventListener","createPortal","target","children","ShearchMessage","style","color","NothingFoundMessage","Status","ImageGallery","query","setQuery","setImages","setPage","loadMore","setLoadMore","setError","status","setStatus","showModal","setShowModal","setLargeImageURL","imageAlt","setImageAlt","newImages","catch","height","width","message","length","dataSrc","dataset","console","log","maxHeight","background","App","autoClose","theme","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6dda33ee.chunk.js","sourcesContent":["import { useState } from 'react';\nimport { toast } from 'react-toastify';\n\nfunction SearchBar({ onSubmit }) {\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const handleChange = e => {\n    setSearchQuery(e.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (searchQuery.trim() === '') {\n      return toast.error('Введите Ваш Запрос');\n    }\n\n    onSubmit(searchQuery);\n    setSearchQuery('');\n  };\n\n  return (\n    <header className=\"Searchbar\">\n      <form className=\"SearchForm\" onSubmit={handleSubmit}>\n        <button type=\"submit\" className=\"SearchForm-button\">\n          <span className=\"SearchForm-button-label\">Search</span>\n        </button>\n\n        <input\n          className=\"SearchForm-input\"\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          onChange={handleChange}\n        />\n      </form>\n    </header>\n  );\n}\n\nexport default SearchBar;\n","const API_KEY = `22901299-3a9abb112bfd753d84521cd93`;\nconst BASE_URL = `https://pixabay.com/api/`;\n\nconst fetchData = (searchQuery, page = 1, perPage = 12) => {\n  const url = `${BASE_URL}?q=${searchQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=${perPage}`;\n\n  return fetch(url)\n    .then(response => {\n      // console.log(searchQuery);\n      if (response.ok) {\n        return response.json();\n      }\n      return Promise.reject(\n        new Error(\n          `no results were found for your search ${this.state.searchQuery}`,\n        ),\n      ); // если 404\n    })\n    .then(images => images.hits);\n};\nexport default fetchData;\n","const scrollContent = () => {\n  window.scrollTo({\n    top: document.documentElement.scrollHeight,\n    behavior: 'smooth',\n  });\n};\n\nexport default scrollContent;\n","import PropTypes from 'prop-types';\n\nexport default function ImageGalleryItem({\n  webformatURL,\n  largeImageURL,\n  tags,\n  onImageClick,\n}) {\n  return (\n    <>\n      <img\n        onClick={e => {\n          onImageClick(e);\n        }}\n        src={webformatURL}\n        data-src={largeImageURL}\n        alt={tags}\n        className=\"ImageGalleryItem-image\"\n      />\n    </>\n  );\n}\nImageGalleryItem.propTypes = {\n  webformatURL: PropTypes.string.isRequired,\n  largeImageURL: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n  onImageClick: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport ImageGalleryItem from 'components/ImageGallery/ImageGalleryItem';\n\nexport default function ImageGalleryList({ images, onImageClick }) {\n  // console.log(images, onImageClick);\n  return (\n    <ul className=\"ImageGallery\">\n      {images.map(image => (\n        <li className=\"ImageGalleryItem\" key={image.id}>\n          <ImageGalleryItem {...image} onImageClick={onImageClick} />\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      largeImageURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n    }).isRequired,\n  ),\n  onImageClick: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\n\nexport default function Button({ onClick }) {\n  return (\n    <button type=\"button\" name=\"Load more\" className=\"Button\" onClick={onClick}>\n      <span className=\"lable\">Load more</span>\n    </button>\n  );\n}\n\nButton.propType = {\n  onClick: PropTypes.func.isRequired,\n};\n","import { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nfunction Modal(props) {\n  // console.log(props);\n\n  useEffect(() => {\n    // console.log('ModalDidMount');\n    window.addEventListener('keydown', handleKeyDown);\n\n    function handleKeyDown(e) {\n      if (e.code === 'Escape') {\n        props.onClose();\n      }\n    }\n    return () => {\n      // console.log('ModalUnMount');\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [props]);\n\n  const handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      props.onClose();\n    }\n  };\n\n  return createPortal(\n    <div className=\"Overlay\" onClick={handleBackdropClick}>\n      <div className=\"Modal\">{props.children}</div>\n    </div>,\n    modalRoot,\n  );\n}\n\nexport default Modal;\n","export function ShearchMessage() {\n  return <h1 style={{ color: '#3f51b5' }}>Enter Your Request</h1>;\n}\nexport function NothingFoundMessage() {\n  return (\n    <h2 style={{ color: 'tomato' }}>\n      No image has been found. Please enter a more specific query!\n    </h2>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport Loader from 'react-loader-spinner';\nimport fetchData from 'service/Api';\nimport scrollContent from 'utils/scroll';\n\nimport ImageGalleryList from 'components/ImageGallery/ImageGalleryList';\nimport Button from 'components/Button';\nimport Modal from 'components/Modal';\nimport {\n  ShearchMessage,\n  NothingFoundMessage,\n} from 'components/Notices/Notices';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\nfunction ImageGallery({ searchQuery }) {\n  const [query, setQuery] = useState('');\n  const [images, setImages] = useState([]);\n  const [page, setPage] = useState(1);\n  const [loadMore, setLoadMore] = useState(false);\n  const [error, setError] = useState(null);\n  const [status, setStatus] = useState(Status.IDLE);\n  const [showModal, setShowModal] = useState(false);\n  const [largeImageURL, setLargeImageURL] = useState('');\n  const [imageAlt, setImageAlt] = useState('');\n\n  useEffect(() => {\n    if (!searchQuery) {\n      return;\n    }\n    setStatus(Status.PENDING);\n    setQuery(searchQuery);\n    setImages([]);\n    setError(null);\n\n    fetchData(searchQuery)\n      .then(newImages => {\n        setImages(images => [...images, ...newImages]);\n        setLoadMore(true);\n        setStatus(Status.RESOLVED);\n      })\n      .catch(error => {\n        setError(error);\n        setStatus(Status.REJECTED);\n      });\n  }, [searchQuery]);\n\n  useEffect(() => {\n    if (!searchQuery) {\n      return;\n    }\n\n    fetchData(query, page)\n      .then(newImages => {\n        setImages(images => [...images, ...newImages]);\n        setLoadMore(true);\n        setStatus(Status.RESOLVED);\n        scrollContent();\n      })\n      .catch(error => {\n        setError(error);\n        setStatus(Status.REJECTED);\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [page]);\n\n  const onLoadMore = () => {\n    setPage(page + 1);\n    console.log(page, images);\n  };\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  const onImageClick = e => {\n    const dataSrc = e.target.dataset.src;\n    const alt = e.target.alt;\n    setLargeImageURL(dataSrc);\n    setImageAlt(alt);\n    setShowModal(true);\n  };\n\n  if (status === Status.IDLE) return <ShearchMessage />;\n\n  if (status === Status.PENDING)\n    return <Loader type=\"ThreeDots\" color=\"#3f51b5\" height={80} width={80} />;\n\n  if (status === Status.REJECTED) return <h1>{error.message}</h1>;\n\n  if (status === Status.RESOLVED && images.length < 1)\n    return <NothingFoundMessage />;\n\n  if (status === Status.RESOLVED)\n    return (\n      <div>\n        <ImageGalleryList images={images} onImageClick={onImageClick} />\n        {loadMore && <Button onClick={onLoadMore} />}\n\n        {showModal && (\n          <Modal onClose={toggleModal}>\n            <img\n              src={largeImageURL}\n              alt={imageAlt}\n              style={{ maxHeight: '80vh', background: 'white' }}\n            />\n          </Modal>\n        )}\n      </div>\n    );\n}\n\nexport default ImageGallery;\n","import { useState } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport SearchBar from 'components/Searchbar';\nimport ImageGallery from 'components/ImageGallery';\n\nfunction App() {\n  const [searchQuery, setSearchQuery] = useState('');\n\n  return (\n    <div className=\"App\">\n      <SearchBar onSubmit={setSearchQuery} />\n\n      <ImageGallery searchQuery={searchQuery} />\n\n      <ToastContainer autoClose={3000} theme={'colored'} />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './index.css';\nimport './styles.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}